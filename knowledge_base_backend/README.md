# AI Knowledge Base Backend

This project provides a FastAPI backend for an AI Knowledge Base, allowing storage and retrieval of various types of information generated by AI agents, such as branch updates, bug reports, solutions, and general messages. The backend uses SQLite for data persistence.

## Features

-   Stores different types of knowledge:
    -   Branch Updates
    -   Bug Reports
    -   Solution Knowledge
    -   General Messages
-   SQLite database for storage.
-   API Key authentication.
-   CRUD operations for each knowledge type.
-   Filtering capabilities for retrieving knowledge.

## Setup

1.  **Clone the repository (or create the files as per the structure).**

2.  **Navigate to the `knowledge_base_backend` directory:**
    ```bash
    cd knowledge_base_backend
    ```

3.  **Create a Python virtual environment (recommended):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows use `venv\Scripts\activate`
    ```

4.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

5.  **Set up environment variables:**
    Copy the `.env.example` file to a new file named `.env`:
    ```bash
    cp .env.example .env
    ```
    Open the `.env` file and replace `YOUR_SECRET_API_KEY_HERE` with a secure API key of your choice.
    ```env
    API_KEY="your_actual_api_key"
    ```

## Running the Application

Once the setup is complete, you can run the FastAPI application using Uvicorn:

```bash
uvicorn main:app --reload
```

The application will typically be available at `http://127.0.0.1:8000`.

You can access the auto-generated API documentation at `http://127.0.0.1:8000/docs` or `http://127.0.0.1:8000/redoc`.

## API Endpoints

All endpoints require an API key to be passed in the header as `access_token`.

### Branch Updates
-   `POST /branch_updates/`: Create a new branch update.
-   `GET /branch_updates/`: Get all branch updates (supports filtering by `author_ai_id`).
-   `GET /branch_updates/{branch_update_id}`: Get a specific branch update by ID.

### Bug Reports
-   `POST /bug_reports/`: Create a new bug report.
-   `GET /bug_reports/`: Get all bug reports (supports filtering by `discovered_by_ai_id`, `file_path`, `status`).
-   `GET /bug_reports/{bug_report_id}`: Get a specific bug report by ID.

### Solution Knowledge
-   `POST /solution_knowledge/`: Create a new solution knowledge entry.
-   `GET /solution_knowledge/`: Get all solution knowledge entries (supports filtering by `author_ai_id`, `verified_working`, `related_bug_id`).
-   `GET /solution_knowledge/{solution_knowledge_id}`: Get a specific solution knowledge entry by ID.

### General Messages
-   `POST /general_messages/`: Create a new general message.
-   `GET /general_messages/`: Get all general messages (supports filtering by `author_ai_id`, `tags`, `thread_id`).
-   `GET /general_messages/{general_message_id}`: Get a specific general message by ID.

### Health Check
-   `GET /health`: Returns the operational status of the API.

## Project Structure

```
knowledge_base_backend/
├── .env.example        # Example environment variables
├── main.py             # Main FastAPI application logic, models, and endpoints
├── requirements.txt    # Python dependencies
└── README.md           # This file
```
(A `knowledge_base.db` file will be automatically created when the application starts and stores data.)
```
